{% extends 'base.html' %}
{% block content %}
<style>
    #removeEmptyUpdates {
        display: block;
        width: 40%;
        margin: 0 auto 0;
        padding: 14px 28px;
        cursor: pointer;
    }


    #logsTitle {
        margin: 20px 0px;
    }

    #logsByUpdate {
        list-style: none;
    }

    i.fa.fa-history {
        margin-right: 5px;

    }

    .logByUpdate {
        margin-bottom: 50px;
    }

    .previousTime {
        color: grey;
    }
</style>

<div class="container">
    <h1 id="logsTitle">Logs update times</h1>
    <form action="/logs/remove_empty_updates" method="POST">
        <button id="removeEmptyUpdates" class="btn btn-block btn-outline-danger">Remove Updates with no logs</button>
    </form>

</div>
<ul id="logsByUpdate">
    {% if not logs_by_update %}
    <i>No logs are stored</i>
    {% endif %}


    {% for log_by_update in logs_by_update %}
    <li class="logByUpdate">
        <i class="fa fa-history fa-lg"></i>
        <em class="logTime">{{log_by_update['log_time']}}</em>


        <p>Previous update: <i class="previousTime">{{log_by_update['previous_update_time']}}</i></p>

        {% if not log_by_update['logs'] %}
        <i>No logs for this update</i>
        {% endif %}


        <ul class="logs">
            {% for log in log_by_update['logs'] %}
            <li>{{log['message']}}</li>
    </li>
    {% endfor %}
</ul>
{% endfor %}
</ul>
</div>
{% endblock %}